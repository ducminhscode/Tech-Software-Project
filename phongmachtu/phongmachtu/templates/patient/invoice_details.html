{% extends 'layout/base.html' %}

{% block title %}Chi tiết hóa đơn{% endblock %}

{% block content %}

<header>
    <link href="{{ url_for('static', filename='css/styles.css') }}" rel="stylesheet"/>
</header>

<h1>Chi Tiết Hóa Đơn</h1>
<div class="container mt-5" style="margin-bottom: 50px; margin-top: 50px;">

    <div class="mt-4">
        <h4>Toa thuốc</h4>
        {% if receipt %}
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>Tên thuốc</th>
                <th>Số lượng</th>
                <th>Đơn vị</th>
                <th>Giá thuốc</th>
                <th>Thành tiền</th>
            </tr>
            </thead>
            <tbody>
            {% for receipt_detail in receipt.receipt_details %}
            <tr>
                <td>{{ receipt_detail.prescription.prescription_medicines[0].medicine.name }}</td>
                <td>{{ receipt_detail.prescription.prescription_medicines[0].quantity }}</td>
                <td>{{ receipt_detail.prescription.prescription_medicines[0].medicine.unit }}</td>
                <td>{{ receipt_detail.prescription.prescription_medicines[0].medicine.price }} VND</td>
                <td>
                    {{ (receipt_detail.prescription.prescription_medicines[0].quantity *
                    receipt_detail.prescription.prescription_medicines[0].medicine.price) | float }} VND
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
        <div class="mb-3 text-end">
            <strong>Thành Tiền Khám:</strong>
            <span>{{ receipt.examines_price }} VND</span>
        </div>

        <div class="mb-3 text-end">
            <strong>Tổng Thành Tiền:</strong>
            <span>{{receipt.total_price }} VND</span>
        </div>
        {% else %}
        <p>Không có toa thuốc nào được kê.</p>
        {% endif %}
    </div>
    <div class="mt-4">
        <a href="{{ url_for('history_patient') }}" class="btn btn-secondary">Quay lại</a>
    </div>
</div>
{% endblock %}
