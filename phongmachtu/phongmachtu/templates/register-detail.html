{% extends 'layout/base.html' %}

{% block title %}Đăng ký Chi Tiết{% endblock %}

{% block content %}
<header>
    <link href="{{ url_for('static', filename='css/styles.css') }}" rel="stylesheet"/>
</header>

<h1>ĐĂNG KÝ CHI TIẾT</h1>

{% if err_msg %}
<div class="alert alert-danger">{{ err_msg }}</div>
{% endif %}

<form method="POST" enctype="multipart/form-data">
    <!-- Họ và Tên -->
    <div class="form-floating mb-3 mt-3">
        <input type="text" class="form-control" id="name" placeholder="Nhập họ tên" name="name" required>
        <label for="name">Họ và Tên</label>
    </div>

    <!-- Tài khoản -->
    <div class="form-floating mb-3 mt-3">
        <input type="text" class="form-control" id="username" placeholder="Nhập tài khoản" name="username" pattern="[A-Za-z0-9]*" required>
        <label for="username">Tài khoản</label>
    </div>

    <!-- Mật khẩu -->
    <div class="form-floating mt-3 mb-3">
        <input type="password" class="form-control" id="password" placeholder="Nhập mật khẩu" name="password" required>
        <label for="password">Mật khẩu</label>
    </div>

    <!-- Xác nhận mật khẩu -->
    <div class="form-floating mt-3 mb-3">
        <input type="password" class="form-control" id="confirm" placeholder="Nhập lại mật khẩu" name="confirm" required>
        <label for="confirm">Nhập lại mật khẩu</label>
    </div>

    <!-- Vai trò -->
    <div class="col-md-6 form-floating">
        <select class="form-select" id="type" name="type" required onchange="showAdditionalFields(this.value)">
            <option value="patient" selected>Bệnh Nhân</option>
            <option value="doctor">Bác sĩ</option>
            <option value="nurse">Y tá</option>
            <option value="cashier">Thu ngân</option>
            <option value="admin">Quản trị viên</option>
        </select>
        <label for="type">Vai trò: </label>
    </div>


    <div id="patient-fields" style="display:none;">
        <h4>Thông tin bệnh nhân</h4>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="address" name="address" placeholder="Địa chỉ" required>
            <label for="address">Địa chỉ</label>
        </div>
        <div class="form-floating mb-3">
            <input type="date" class="form-control" id="day_of_birth" name="day_of_birth" required>
            <label for="day_of_birth">Ngày sinh</label>
        </div>
        <div class="form-floating mb-3">
            <select class="form-select" id="gender" name="gender" required>
                <option value="male">Nam</option>
                <option value="female">Nữ</option>
            </select>
            <label for="gender">Giới tính</label>
        </div>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="phone" name="phone" placeholder="Số điện thoại" required>
            <label for="phone">Số điện thoại</label>
        </div>
    </div>

    <div id="doctor-fields" style="display:none;">
        <h4>Thông tin bác sĩ</h4>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="license" name="license" placeholder="Giấy phép hành nghề" required>
            <label for="license">Giấy phép hành nghề</label>
        </div>
    </div>

    <div id="cashier-fields" style="display:none;">
        <h4>Thông tin thu ngân</h4>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="license" name="license" placeholder="Giấy phép hành nghề" required>
            <label for="license">Giấy phép hành nghề</label>
        </div>
    </div>

    <div id="nurse-fields" style="display:none;">
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="department" name="department" placeholder="Phụ trách khoa" required>
            <label for="department">Phụ trách khoa</label>
        </div>
    </div>

    <div id="admin-fields" style="display:none;">
        <a>ADMIN</a>
    </div>

    <!-- Nút đăng ký -->
    <div class="form-floating mt-3 mb-3">
        <button class="btn btn-success" type="submit">Đăng ký</button>
    </div>
</form>

<script>
    function showAdditionalFields(type) {
        document.getElementById('patient-fields').style.display = (type === 'patient') ? 'block' : 'none';
        document.getElementById('doctor-fields').style.display = (type === 'doctor') ? 'block' : 'none';
        document.getElementById('cashier-fields').style.display = (type === 'cashier') ? 'block' : 'none';
        document.getElementById('nurse-fields').style.display = (type === 'nurse') ? 'block' : 'none';
        document.getElementById('admin-fields').style.display = (type === 'admin') ? 'block' : 'none';
    }
</script>

{% endblock %}
